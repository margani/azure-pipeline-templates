parameters:
  - name: expectations
    type: object

steps:
  - ${{ each expectation in parameters.expectations }}:
    - task: PowerShell@2
      displayName: Test Variable [${{ expectation.key }}]
      inputs:
        filePath: $(TemplatesCheckoutFolderPath)/tests/scripts/test-variables.ps1
        arguments: -Name "${{ expectation.key }}" -Expected "${{ expectation.value }}" -Actual "$(${{ expectation.key }})"
        pwsh: true
