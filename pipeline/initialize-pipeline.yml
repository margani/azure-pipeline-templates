parameters:
  - name: env
    type: string
    default: $(env)
  - name: varSubscriptions
    type: string
    default: $(varSubscriptions)
  - name: selfRepoCheckoutFolderName
    type: string
    default: 'product'
  - name: templatesRepoResourceName
    type: string
    default: 'templates'

steps:
  - checkout: self
    path: ${{ parameters.selfRepoCheckoutFolderName }}
  - checkout: ${{ parameters.templatesRepoResourceName }}
    path: ${{ parameters.templatesRepoResourceName }}
  - task: PowerShell@2
    displayName: Initialize Pipeline
    inputs:
      filePath: azure-pipeline-templates/pipeline/scripts/initialize-pipeline.ps1
      arguments: -VarSubscriptions "${{ parameters.varSubscriptions }}"
        -Environment "${{ parameters.env }}"
      pwsh: true
