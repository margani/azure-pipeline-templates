parameters:
  - name: env
    type: string
    default: $(env)
  - name: varSubscriptions
    type: string
    default: $(varSubscriptions)
  - name: templatesRepoName
    type: string
    default: 'templates'
  - name: variablesRepoName
    type: string
    default: 'variables'

steps:
  - checkout: self
  - checkout: ${{ parameters.templatesRepoName }}
  - checkout: ${{ parameters.variablesRepoName }}
  - task: PowerShell@2
    displayName: Initialize Pipeline
    inputs:
      filePath: azure-pipeline-templates/pipeline/scripts/initialize-pipeline.ps1
      arguments: -VarSubscriptions "${{ parameters.varSubscriptions }}"
        -Environment "${{ parameters.env }}"
      pwsh: true
